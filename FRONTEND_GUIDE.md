# 網頁管理介面使用指南

## 🎉 好消息!

系統現在有完整的網頁管理介面了!不需要再用終端機或 VS Code 執行命令。

---

## 🚀 快速開始

### 1. 啟動服務

開啟**兩個終端機視窗**:

#### 終端機 1 - API Server
```bash
cd "d:\threads bot"
npm run dev
```

#### 終端機 2 - Worker
```bash
cd "d:\threads bot"
npm run worker
```

### 2. 開啟網頁介面

在瀏覽器輸入:
```
http://localhost:3000
```

### 3. 登入系統

預設帳號:
- **Email**: `admin@example.com`
- **密碼**: `admin123`

---

## 📱 介面功能

### 總覽頁面 📊

- 查看系統統計資料
  - 總貼文數
  - 草稿數量
  - 待審核數量
  - 已發布數量
- 最近貼文快速查看

### 貼文管理 📝

- 查看所有貼文
- 依狀態篩選
  - 草稿
  - 產生中
  - 待審核
  - 已核准
  - 已發布
  - 失敗
- 貼文操作
  - 查看詳情
  - 生成內容
  - 核准貼文
  - 重新生成
  - 發布到 Threads
  - 刪除貼文

### 建立貼文 ➕

填寫表單建立新貼文:

1. **主題** (必填)
   - 例如: "AI 人工智慧的未來發展"

2. **關鍵字** (必填,用逗號分隔)
   - 例如: "AI, 機器學習, 深度學習"

3. **目標語氣**
   - 專業但易懂
   - 輕鬆親切
   - 專業分析
   - 幽默風趣
   - 激勵人心

4. **目標長度**
   - 短文 (300字)
   - 中等 (500字)
   - 長文 (800字)

5. **排程發布時間** (選填)
   - 選擇未來的日期時間

6. **建立後立即生成內容** (勾選框)
   - 勾選後會自動觸發 AI 生成

---

## 🎯 完整工作流程

### 情境 1: 立即建立並發布貼文

1. 點擊「➕ 建立貼文」分頁
2. 填寫主題和關鍵字
3. 勾選「建立後立即生成內容」
4. 點擊「建立貼文」
5. 系統自動跳轉到「📝 貼文管理」
6. 等待 10-30 秒 (自動重新整理)
7. 狀態變為「待審核」後,點擊「核准」
8. 點擊「發布」發布到 Threads

### 情境 2: 先建立草稿,稍後處理

1. 點擊「➕ 建立貼文」
2. 填寫資料
3. **不勾選**「建立後立即生成內容」
4. 點擊「建立貼文」
5. 稍後到「📝 貼文管理」
6. 點擊「生成內容」

### 情境 3: 批次查看與管理

1. 點擊「📝 貼文管理」
2. 使用篩選器選擇狀態
3. 批次處理所有待審核的貼文

---

## 🎨 介面說明

### 狀態顏色

- **灰色** - 草稿
- **黃色** - 產生中
- **藍色** - 待審核
- **綠色** - 已核准
- **淺藍色** - 已發布
- **紅色** - 失敗

### 貼文卡片

每張貼文卡片顯示:
- 主題
- 狀態標籤
- 關鍵字標籤
- 語氣和目標長度
- 建立時間
- 排程時間 (如有)
- 操作按鈕

### 按鈕說明

| 按鈕 | 說明 | 出現時機 |
|------|------|----------|
| 查看詳情 | 查看完整貼文內容 | 永遠顯示 |
| 生成內容 | 觸發 AI 生成內容 | 草稿狀態 |
| 核准 | 核准貼文進入發布流程 | 待審核狀態 |
| 重新生成 | 要求 AI 重新產生內容 | 待審核狀態 |
| 發布 | 發布到 Threads | 已核准狀態 |
| 刪除 | 刪除貼文 | 永遠顯示 |

---

## ⚡ 自動重新整理

- 系統每 30 秒自動重新整理資料
- 無需手動刷新頁面
- 可以看到即時的狀態更新

---

## 🔔 通知與提示

### 成功訊息 (綠色)
- 貼文建立成功
- 核准成功
- 刪除成功

### 資訊訊息 (藍色)
- 內容生成任務已加入佇列
- 發布任務已加入佇列

### 錯誤訊息 (紅色)
- 建立失敗
- 生成失敗
- 發布失敗

訊息會在 5 秒後自動消失。

---

## 📱 響應式設計

介面支援以下裝置:
- 桌面電腦 (推薦)
- 平板電腦
- 手機 (部分功能)

---

## 🔧 進階功能

### 查看貼文詳情

點擊「查看詳情」會顯示彈出視窗,包含:
- 完整內容
- 字數統計
- 使用的 AI 引擎 (ChatGPT / Gemini)
- 生成時間
- 所有元數據

### 篩選功能

使用篩選器快速找到特定狀態的貼文:
1. 選擇狀態下拉選單
2. 點擊「🔄 重新整理」

---

## ⚠️ 重要提醒

### 1. 需要 AI API Key

內容生成功能需要設定至少一個 AI API Key:
- `OPENAI_API_KEY` (ChatGPT)
- `GEMINI_API_KEY` (Gemini)

在 `.env.local` 中設定。

### 2. 需要 LINE User ID

要接收審稿通知,需要更新管理員的 LINE User ID:

```sql
mysql -u root -p threads_bot_db

UPDATE users
SET line_user_id = '你的LINE_USER_ID'
WHERE email = 'admin@example.com';
```

### 3. 需要 Threads 帳號

發布功能需要先設定 Threads 帳號授權。
參考 [SETUP.md](SETUP.md) 的 Threads 設定章節。

---

## 🐛 常見問題

### Q: 為什麼看不到網頁?

A: 確認:
1. API Server 是否運行中 (port 3000)
2. 瀏覽器網址是 `http://localhost:3000`
3. 查看終端機是否有錯誤訊息

### Q: 登入失敗?

A: 確認:
1. 資料庫是否已執行 migration 和 seed
2. 使用正確的帳號密碼
3. 查看 `logs/error.log`

### Q: 建立貼文後沒有生成內容?

A: 確認:
1. Worker 是否運行中
2. 是否勾選「建立後立即生成內容」
3. 是否設定了 AI API Key
4. 查看 `logs/error.log`

### Q: 內容一直在「產生中」?

A:
1. 檢查 Worker 終端機輸出
2. 查看 `logs/error.log`
3. 確認 AI API Key 正確
4. 確認網路連線正常

### Q: 如何重置密碼?

A: 使用 SQL 更新:

```sql
mysql -u root -p threads_bot_db

-- 重置為 admin123
UPDATE users
SET password_hash = '$2b$10$...'  -- 需要先產生 bcrypt hash
WHERE email = 'admin@example.com';
```

或重新執行 seed:
```bash
npm run seed
```

---

## 🎓 使用技巧

### 技巧 1: 批次建立貼文

1. 建立多個草稿
2. 一次全部觸發生成
3. 集中時間審核
4. 排程不同時間發布

### 技巧 2: 監控狀態

開啟「📊 總覽」分頁,即時監控:
- 有多少貼文待審核
- 今天發布了幾篇
- 是否有失敗的任務

### 技巧 3: 使用排程

設定排程時間後:
- 系統會在指定時間自動發布
- 不需要手動點擊發布
- 適合提前準備內容

### 技巧 4: 快速測試

1. 建立簡單主題的貼文
2. 勾選立即生成
3. 觀察整個流程
4. 確認系統運作正常

### 技巧 5: 使用 LINE Bot 指令

LINE Bot 支援以下指令，直接在 LINE 對話中輸入即可：

| 指令 | 說明 | 範例回覆 |
|------|------|----------|
| `/id` | 查詢您的 LINE User ID | 顯示您的 LINE User ID，用於設定系統通知 |
| `/s` | 查詢目前的自動發文排程 | 顯示發文帳號、管理員和排程時間 |

**範例：查詢排程**
```
在 LINE 中輸入: /s

系統回覆:
📅 自動發文排程

📢 發文帳號：@your_threads_username
👤 管理員：Admin

✅ 已啟用：
  • 星期一 09:00
  • 星期二 20:54
  • 星期三 09:00
  • 星期四 09:00
  • 星期五 09:00

❌ 未啟用：星期六、星期日
```

---

## 🚀 生產環境部署

部署到 Zeabur 或其他平台時:

1. 確保 `public` 資料夾包含在部署中
2. 環境變數 `BASE_URL` 設定正確
3. 使用 HTTPS
4. 設定正確的 CORS 允許來源

---

## 📊 效能優化

### 建議設定

- 使用現代瀏覽器 (Chrome, Edge, Firefox)
- 網路連線穩定
- 不要同時開啟太多分頁

### 載入速度

- 首次載入: < 1 秒
- API 回應: < 500ms
- 自動重新整理: 每 30 秒

---

## 🎉 開始使用!

現在您有了完整的圖形化管理介面,可以:

1. ✅ 方便地建立貼文
2. ✅ 視覺化管理所有貼文
3. ✅ 一鍵生成和發布
4. ✅ 即時查看狀態更新
5. ✅ 不需要記住任何命令

祝您使用愉快! 🚀

---

## 🆘 獲得幫助

如遇問題:

1. 查看 [TESTING_GUIDE.md](TESTING_GUIDE.md)
2. 查看 [SETUP.md](SETUP.md)
3. 檢查 `logs/` 目錄
4. 聯絡技術支援

---

**最後更新**: 2024
**版本**: 1.0
